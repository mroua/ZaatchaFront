<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <form id="contactForm">
        <input type="text" id="name" name="name" placeholder="Your Name" required>
        <input type="email" id="email" name="email" placeholder="Your Email" required>
        <textarea id="message" name="message" placeholder="Your Message" required></textarea>
        <button type="submit">Send</button>
    </form>

    <script>
        $(document).ready(function() {
            $('#contactForm').on('submit', function(event) {
                event.preventDefault();

                // Collect form data
                var formData = {
                    from: $('#name').val() + ' <' + $('#email').val() + '>',
                    to: 'YOUR_VERIFIED_EMAIL@example.com', // Replace with your verified recipient email
                    subject: 'New Contact Form Submission',
                    text: $('#message').val()
                };

                // Send email using Mailgun
                sendEmail(formData);
            });

            function sendEmail(formData) {
                const mgApiKey = '8a084751-c04dabc8'; // Replace with your Mailgun API key
                const mgDomain = 'sandbox3cf5f18ac6f245778dd7a08198198b57.mailgun.org'; // Replace with your Mailgun sandbox domain
                const mgUrl = `https://api.mailgun.net/v3/${mgDomain}/messages`;

                $.ajax({
                    type: 'POST',
                    url: mgUrl,
                    headers: {
                        'Authorization': 'Basic ' + btoa('api:' + mgApiKey)
                    },
                    data: formData,
                    success: function(response) {
                        console.log('Email sent successfully:', response);
                        alert('Email sent successfully!');
                        // Optionally, clear the form after successful submission
                        $('#name, #email, #message').val('');
                    },
                    error: function(xhr, status, error) {
                        console.error('Email send error:', error);
                        alert('Email sending failed. Please try again later.');
                    }
                });
            }
        });
    </script>
</body>
</html>
